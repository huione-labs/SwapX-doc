# Flash Swaps
SwapX 闪电交换允许您提取 SwapX 上任何 ERC20 代币的全部储备，并执行任意逻辑，无需预付费用，前提是在交易结束时您可以：

使用相应的对代币支付提取的 ERC20 代币
返还提取的 ERC20 代币以及少量费用
闪电交换非常有用，因为它们消除了涉及 SwapX 的多步骤交易的前期资本要求和不必要的操作顺序限制。

# Examples
## Capital Free Arbitrage
O闪电互换的一个特别有趣的用例是无资本套利。众所周知，SwapX 设计的一个重要部分是激励套利者将 SwapX 价格交易到“公平”的市场价格。虽然从博弈论的角度来看，这种策略是合理的，但只有那些拥有足够资本来利用套利机会的人才能使用。闪电互换完全消除了这一障碍，有效地使套利民主化。

想象一下，在 SwapX 上购买 1 个 XOC 的成本是 200 DAI（通过调用getAmountIn指定 1 XOC 作为精确输出来计算），而在 Oasis（或任何其他交易场所），1 XOC 可以购买 220 DAI。对于任何拥有 200 DAI 的人来说，这种情况代表着 20 DAI 的无风险利润。不幸的是，你可能没有 200 DAI 闲置。然而，通过闪电交换，只要他们能够支付 gas 费，任何人都可以获得这种无风险利润。


## Withdrawing XOC from SwapX
第一步是通过闪电交换从 SwapX 中提取1 个 ETH。这将作为我们执行套利的资本。请注意，在这种情况下，我们假设：

- 1 XOC 是预先计算的利润最大化交易
- 自我们计算以来，SwapX 或 Oasis 上的价格没有变化
我们可能希望在执行时计算链上利润最大化的交易，这对价格变动具有鲁棒性。这可能有点复杂，具体取决于正在执行的策略。但是，一种常见的策略是针对固定的外部价格尽可能有利可图地进行交易。

## Trade at External Venue
一旦我们从 SwapX 获得了 1 XOC 的临时资本，我们现在就可以在 Oasis 上将其兑换为 220 DAI。一旦我们收到 DAI，我们就需要偿还 SwapX。我们已经提到，偿还 1 XOC 所需的金额是 200 DAI，通过 计算getAmountIn。因此，在将 200 DAI 发送回 SwapX 对后，您还剩下 20 DAI 的利润！

# Instant Leverage
闪电互换可用于提高利用借贷协议和 SwapX 进行杠杆提升的效率。

考虑 Maker 的最简单形式：一个接受 XOC 作为抵押品并允许根据其铸造 DAI 的系统，同时确保 XOC 的价值永远不会低于 DAI 价值的 150％。

假设我们使用这个系统存入 3 XOC 的本金，并铸造最大数量的 DAI。以 1 XOC / 200 DAI 的价格，我们收到 400 DAI。理论上，我们可以通过出售 DAI 换取更多 ETH、存入这些 ETH、铸造最大数量的 DAI（这次会更少）并重复这一过程，直到达到我们想要的杠杆水平，从而提高这个头寸的杠杆率。

使用 SwapX 作为此流程中 DAI 到 XOC 部分的流动性来源非常简单。但是，以这种方式循环遍历协议并不是特别优雅，并且可能非常耗费 gas。

幸运的是，闪电互换使我们能够预先提取全部ETH 金额。如果我们想要对 3 XOC 本金进行 2 倍杠杆，我们可以简单地在闪电互换中请求 3 ETH，并将 6 XOC 存入 Maker。这使我们能够铸造 800 DAI。如果我们铸造的 DAI 足以覆盖我们的闪电互换（例如 605），则剩余部分可作为价格波动的安全边际。

